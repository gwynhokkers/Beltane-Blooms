import{d as U,ao as j,ap as b,c,ah as k,w as h,e as m,n as p,E as t,h as y,g as _,f as x,t as S,aj as $,ab as z,aK as X,r as O,H as Y,aL as Z,aM as tt,a as et,u as E,F as M,ag as V,aN as nt,z as at,D as ot,ai as B,x as rt,aO as H,aP as st,aQ as N,aR as R,aS as D,aT as it,s as P,aU as ct,aV as lt,aW as ut,k as dt,ac as pt,an as gt}from"./A3aJX4OV.js";import{_ as mt,a as yt}from"./k9ThhOiy.js";import _t from"./BQ25frve.js";import"./CudeD3jT.js";import"./C-v3KzvZ.js";import"./Dnd51l0P.js";const ft=U({inheritAttrs:!1,__name:"ContentSurroundLink",props:{link:{type:Object,required:!0},icon:{type:String,default:void 0},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:()=>({})}},setup(n){const a={wrapper:"block px-6 py-8 border not-prose rounded-lg border-gray-200 dark:border-gray-800 hover:bg-gray-100/50 dark:hover:bg-gray-800/50 group",icon:{wrapper:"inline-flex items-center rounded-full p-1.5 bg-gray-100 dark:bg-gray-800 group-hover:bg-primary/10 ring-1 ring-gray-300 dark:ring-gray-700 mb-4 group-hover:ring-primary/50",base:"w-5 h-5 text-gray-900 dark:text-white group-hover:text-primary"},title:"font-medium text-gray-900 dark:text-white text-[15px] mb-1",description:"text-sm font-normal text-gray-500 dark:text-gray-400 line-clamp-2"},i=n,{ui:o,attrs:e}=j("content.surround.link",b(i,"ui"),a,b(i,"class"),!0);return(r,s)=>{const u=z,d=X;return c(),k(d,$({to:n.link._path,class:t(o).wrapper},t(e)),{default:h(()=>[n.icon||n.link.icon?(c(),m("div",{key:0,class:p(t(o).icon.wrapper)},[y(u,{name:n.icon||n.link.icon,class:p(t(o).icon.base)},null,8,["name","class"])],2)):_("",!0),x("p",{class:p(t(o).title)},S(n.link.title),3),x("p",{class:p(t(o).description)},S(n.link.description),3)]),_:1},16,["to","class"])}}}),ht={key:1,class:"hidden sm:block"},kt=U({inheritAttrs:!1,__name:"ContentSurround",props:{surround:{type:Array,default:()=>[]},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:()=>({})}},setup(n){const a={wrapper:"grid gap-8 sm:grid-cols-2",icon:{prev:"i-heroicons-arrow-left-20-solid",next:"i-heroicons-arrow-right-20-solid"},link:{}},i=n,{ui:o,attrs:e}=j("content.surround",b(i,"ui"),a,b(i,"class"),!0),[r,s]=i.surround||[];return(u,d)=>{const l=ft;return c(),m("div",$({class:t(o).wrapper},t(e)),[t(r)?(c(),k(l,{key:0,link:t(r),ui:t(o).link,icon:t(o).icon.prev},null,8,["link","ui","icon"])):(c(),m("span",ht," ")),t(s)?(c(),k(l,{key:2,link:t(s),ui:t(o).link,icon:t(o).icon.next,class:"text-right"},null,8,["link","ui","icon"])):_("",!0)],16)}}}),bt=()=>{const n=O(),a=O([]),i=O([]),o=r=>{r.forEach(s=>{const u=s.target.id;s.isIntersecting?a.value=[...a.value,u]:a.value=a.value.filter(d=>d!==u)})},e=r=>{r.forEach(s=>{n.value&&n.value.observe(s)})};return Y(a,(r,s)=>{r.length===0?i.value=s:i.value=r}),Z(()=>n.value=new IntersectionObserver(o)),tt(()=>{var r;return(r=n.value)==null?void 0:r.disconnect()}),{visibleHeadings:a,activeHeadings:i,updateHeadings:e}},xt=["href","onClick"],q=U({inheritAttrs:!1,__name:"ContentTocLinks",props:{links:{type:Array,default:()=>[]},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:()=>({})}},emits:["move"],setup(n,{emit:a}){const i={wrapper:"space-y-1",base:"block text-sm/6 truncate",active:"text-primary",inactive:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",depth:"ml-3"},o=n,e=a,r=et(),s=E(),{activeHeadings:u,updateHeadings:d}=bt(),{ui:l,attrs:C}=j("content.toc.links",b(o,"ui"),i,b(o,"class"),!0);s.hooks.hookOnce("page:finish",()=>{d([...document.querySelectorAll("h2"),...document.querySelectorAll("h3")])});const f=v=>{const A=encodeURIComponent(v);r.push(`#${A}`),e("move",v)};return(v,A)=>{var I;const T=q;return(I=n.links)!=null&&I.length?(c(),m("ul",$({key:0,class:t(l).wrapper},t(C)),[(c(!0),m(M,null,V(n.links,g=>(c(),m("li",{key:g.text,class:p([t(l).wrapper,g.depth===3&&t(l).depth])},[x("a",{href:`#${g.id}`,class:p([t(l).base,t(u).includes(g.id)?t(l).active:t(l).inactive]),onClick:nt(L=>f(g.id),["prevent"])},S(g.text),11,xt),g.children?(c(),k(T,{key:0,links:g.children,ui:t(l)},null,8,["links","ui"])):_("",!0)],2))),128))],16)):_("",!0)}}}),vt=U({inheritAttrs:!1,__name:"ContentToc",props:{title:{type:String,default:"Table of Contents"},links:{type:Array,default:()=>[]},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:()=>({})}},setup(n){const a=at(),i=ot(()=>({wrapper:"sticky top-[--header-height] bg-background/75 backdrop-blur -mx-4 sm:-mx-6 px-4 sm:px-6 lg:px-4 lg:-mx-4 overflow-y-auto max-h-[calc(100vh-var(--header-height))]",container:{base:"py-3 lg:py-8 border-b border-dashed border-gray-200 dark:border-gray-800 lg:border-0 space-y-3",empty:"lg:py-8 space-y-3"},button:{base:"flex items-center gap-1.5 lg:cursor-text lg:select-text w-full group",label:"font-semibold text-sm/6 truncate",trailingIcon:{name:a.ui.icons.chevron,base:"w-5 h-5 ms-auto transform transition-transform duration-200 flex-shrink-0 mr-1.5",active:"text-gray-700 dark:text-gray-200",inactive:"text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-200 -rotate-90"}},links:{}})),o=n,{ui:e,attrs:r}=j("content.toc",b(o,"ui"),i,b(o,"class"),!0),s=O(!1);return(u,d)=>{var f,v;const l=z,C=q;return c(),m("nav",$({class:t(e).wrapper},t(r)),[x("div",{class:p([(f=n.links)!=null&&f.length?t(e).container.base:t(e).container.empty])},[B(u.$slots,"top"),(v=n.links)!=null&&v.length?(c(),m("button",{key:0,class:p(t(e).button.base),tabindex:"-1",onClick:d[0]||(d[0]=A=>s.value=!t(s))},[x("span",{class:p(t(e).button.label)},S(n.title),3),y(l,{name:t(e).button.trailingIcon.name,class:p(["lg:!hidden",[t(e).button.trailingIcon.base,t(s)?t(e).button.trailingIcon.active:t(e).button.trailingIcon.inactive]])},null,8,["name","class"])],2)):_("",!0),y(C,{links:n.links,ui:t(e).links,class:p([t(s)?"lg:block":"hidden lg:block"])},null,8,["links","ui","class"]),B(u.$slots,"bottom")],2)],16)}}});function wt(n){let a;return a=E().$nuxtSiteConfig,a||{}}const Ct=x("span",{class:"text-gray-500 dark:text-gray-400"},"·",-1),St={class:"text-gray-500 dark:text-gray-400"},$t={class:"flex flex-wrap items-center gap-3 mt-4"},At={key:1},Bt=U({__name:"[slug]",async setup(n){var d,l,C;let a,i;const o=rt(),{data:e}=([a,i]=H(()=>D(o.path,()=>P(o.path).findOne(),"$9yljQkk6zF")),a=await a,i(),a);if(!e.value)throw st({statusCode:404,statusMessage:"Post not found",fatal:!0});const{data:r}=([a,i]=H(()=>D(`${o.path}-surround`,()=>P("/blog").where({_extension:"md"}).without(["body","excerpt"]).sort({date:-1}).findSurround(ct(o.path)),{default:()=>[]})),a=await a,i(),a),s=((d=e.value.head)==null?void 0:d.title)||e.value.title,u=((l=e.value.head)==null?void 0:l.description)||e.value.description;if(N({title:s,ogTitle:s,description:u,ogDescription:u}),(C=e.value.image)!=null&&C.src){const f=wt();N({ogImage:R(f.url,e.value.image.src),twitterImage:R(f.url,e.value.image.src)})}return(f,v)=>{const A=lt,T=pt,I=gt,g=mt,L=_t,F=kt,Q=yt,K=vt,W=ut,G=it;return t(e)?(c(),k(G,{key:0},{default:h(()=>[y(g,{title:t(e).title,description:t(e).description},{headline:h(()=>[y(A,$(t(e).badge,{variant:"subtle"}),null,16),Ct,x("time",St,S(new Date(t(e).date).toLocaleDateString("en",{year:"numeric",month:"short",day:"numeric"})),1)]),default:h(()=>[x("div",$t,[(c(!0),m(M,null,V(t(e).authors,(w,J)=>(c(),k(I,{key:J,to:w.to,color:"white",target:"_blank",size:"sm"},{default:h(()=>[y(T,$({ref_for:!0},w.avatar,{alt:w.name,size:"2xs"}),null,16,["alt"]),dt(" "+S(w.name),1)]),_:2},1032,["to"]))),128))])]),_:1},8,["title","description"]),y(W,null,{right:h(()=>[t(e).body&&t(e).body.toc?(c(),k(K,{key:0,links:t(e).body.toc.links},null,8,["links"])):_("",!0)]),default:h(()=>[y(Q,{prose:""},{default:h(()=>{var w;return[t(e)&&t(e).body?(c(),k(L,{key:0,value:t(e)},null,8,["value"])):_("",!0),(w=t(r))!=null&&w.length?(c(),m("hr",At)):_("",!0),y(F,{surround:t(r)},null,8,["surround"])]}),_:1})]),_:1})]),_:1})):_("",!0)}}});export{Bt as default};
